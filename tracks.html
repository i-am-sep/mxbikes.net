<!DOCTYPE html>
<html>
<head>
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <title>MXBikes.net - Tracks</title>
</head>
<body class="bg-gray-900 text-white">
    <div class="header">
        <!-- ... (Header remains the same) ... -->
    </div>

    <div class="container mx-auto px-4 py-8 mt-20">
        <h2 class="text-3xl font-bold mb-8 text-center">Tracks</h2>
        <div id="tracksGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Tracks will be loaded here dynamically -->
        </div>
    </div>

    <script>
        async function loadTracks() {
            try {
                const response = await fetch('/data/mods.json');
                const mods = await response.json();
                const tracksGrid = document.getElementById('tracksGrid');

                // Filter mods to get only tracks
                const tracks = mods.filter(mod => mod.type === "track");

                tracks.forEach(track => {
                    // Find the main image (same logic as bikes.html)
                    const mainImage = track.images.find(img =>
                        !img.includes('Logo') &&
                        !img.includes('logo') &&
                        !img.includes('profile_photo')
                    ) || track.images[0] || 'assets/images/placeholder.jpg';

                    //Filter downloads (same logic as bikes.html)
                    const downloads = track.downloads.filter(d =>
                        !d.url.includes('twitter.com') &&
                        !d.url.includes('#download') &&
                        !d.label.includes('Templates')
                    );


                    const trackCard = document.createElement('div');
                    trackCard.className = 'bg-gray-800 rounded-lg overflow-hidden shadow-lg transition transform hover:scale-105';
                    trackCard.innerHTML = `
                        <div class="relative pb-48">
                            <img class="absolute h-full w-full object-cover"
                                 src="${mainImage}"
                                 alt="${track.name}"
                                 onerror="this.src='assets/images/placeholder.jpg'">
                        </div>
                        <div class="p-4">
                            <h3 class="text-xl font-bold mb-2">${track.name}</h3>
                            <p class="text-gray-400 mb-4">${track.description}</p>
                            <div class="space-y-2">
                                ${downloads.map(download => `
                                    <a href="${download.url}"
                                       target="_blank"
                                       class="block bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded text-center">
                                        ${download.label}
                                    </a>
                                `).join('')}
                            </div>
                        </div>
                    `;
                    tracksGrid.appendChild(trackCard);
                });
            } catch (error) {
                console.error('Error loading tracks:', error);
                document.getElementById('tracksGrid').innerHTML = `
                    <div class="col-span-full text-center text-red-500">
                        Error loading tracks. Please try again later.
                    </div>
                `;
            }
        }

        document.addEventListener('DOMContentLoaded', loadTracks);
    </script>

    <script src="scripts.js"></script>
</body>
</html>
